{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/styles.mixin.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'UCDB/MIXIN/STYLES'\nlog                       = CND.get_logger 'plain',     badge\ninfo                      = CND.get_logger 'info',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\nalert                     = CND.get_logger 'alert',     badge\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\nhelp                      = CND.get_logger 'help',      badge\nurge                      = CND.get_logger 'urge',      badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\nFS                        = require 'fs'\nFSP                       = FS.promises\nPATH                      = require 'path'\n{ assign\n  jr }                    = CND\n{ walk_cids_in_cid_range\n  cwd_abspath\n  cwd_relpath\n  here_abspath\n  _drop_extension\n  project_abspath }       = require './helpers'\ntypes                     = require './types'\n#...........................................................................................................\n{ isa\n  validate\n  declare\n  cast\n  size_of\n  last_of\n  type_of }               = types\n#...........................................................................................................\n@_styles_ivtree           = null\n@_styles_cache            = {}\nCS                        = require 'coffeescript'\nVM                        = require 'vm'\n\n# #-----------------------------------------------------------------------------------------------------------\n# sort_cid_ranges_by_nr = ( cid_ranges ) -> cid_ranges.sort ( a, b ) -> a.nr - b.nr\n\n#-----------------------------------------------------------------------------------------------------------\n@_provide_style_cache = ( me ) ->\n  throw new Error \"^ucdb/styles@857^ not implemented ATM\"\n  # return null if @_styles_ivtree?\n  # IntervalTree      = ( require '@flatten-js/interval-tree' ).default\n  # @_styles_ivtree   = new IntervalTree()\n  # count             = 0\n  # #.........................................................................................................\n  # for d from me.db.read_cfg_rsgs_and_blocks()\n  #   count++\n  #   d.type  = 'block'\n  #   d.nr    = count\n  #   @_styles_ivtree.insert [ d.first_cid, d.last_cid, ], d\n  # #.........................................................................................................\n  # for d from me.db.read_cfg_styles_codepoints_and_fontnicks()\n  #   count++\n  #   d.type        = 'glyphstyle'\n  #   d.nr          = count\n  #   d.glyphstyle  = @compile_style_txt me, d.glyphstyle\n  #   @_styles_ivtree.insert [ d.first_cid, d.last_cid, ], d\n  # #.........................................................................................................\n  # return count\n\n#-----------------------------------------------------------------------------------------------------------\n@compile_style_txt = ( me, style_txt ) ->\n  return null unless style_txt?\n  ### TAINT should probably be done when reading configuration files ###\n  return null if ( style_txt.match /^\\s*#/ )?\n  style_txt = \"{#{style_txt}}\" unless style_txt.startsWith '{'\n  try\n    R = VM.runInNewContext CS.compile style_txt, { bare: true, }\n  catch error\n    throw new Error \"^ucdb/styles@8686 when trying to parse #{rpr style_txt}, an error occurred: #{error.message}\"\n  return R\n\n# #-----------------------------------------------------------------------------------------------------------\n# @_included_style_properties = Object.freeze [ 'fontnick', 'glyphstyle', 'icgroup', 'rsg', ]\n# # @_included_style_properties = Object.freeze [ 'styletag', 'fontnick', 'glyphstyle', 'icgroup', 'rsg', ]\n\n# #-----------------------------------------------------------------------------------------------------------\n# @_delete_extraneous_style_properties = ( style ) ->\n#   R         = {}\n#   for key, value of style\n#     continue unless key in @_included_style_properties\n#     R[ key ] = value\n#   return R\n\n#-----------------------------------------------------------------------------------------------------------\n@style_from_glyph = ( me, glyph ) ->\n  throw new Error \"^ucdb/styles@857^ not implemented ATM\"\n  # validate.chr glyph\n  # return @style_from_cid me, glyph.codePointAt 0\n\n#-----------------------------------------------------------------------------------------------------------\n@style_from_cid = ( me, cid ) ->\n  throw new Error \"^ucdb/styles@857^ not implemented ATM\"\n  # validate.ucdb_cid cid\n  # @_provide_style_cache me unless @_styles_ivtree?\n  # return R if ( R = @_styles_cache[ cid ] )?\n  # entries = @_styles_ivtree.search [ cid, cid, ]\n  # sort_cid_ranges_by_nr entries ### TAINT necessary? ###\n  # default_style   = {}\n  # R               = {}\n  # for entry in entries\n  #   if ( stylename = entry.styletag ? '*' ) is '*'\n  #     default_style = assign default_style, entry\n  #   else\n  #     ( R[ stylename ] ?= [] ).push entry\n  # default_style   = @_delete_extraneous_style_properties default_style\n  # for stylename, entries of R\n  #   R[ stylename ] = @_delete_extraneous_style_properties assign default_style, R[ stylename ]...\n  # @_styles_cache[ cid ] = R\n  # return R\n\n\n# ############################################################################################################\n# if require.main is module then do =>\n#   null\n\n\n\n\n\n\n"
  ]
}